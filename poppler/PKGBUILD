
pkgname=poppler
pkgver=0.58.0
pkgrel=1
arch=('x86_64')
pkgdesc="PDF rendering library based on xpdf 3.0"
url="https://poppler.freedesktop.org/"
license=('GPL')
depends=('libjpeg' 'gcc-libs' 'cairo' 'libxml2' 'fontconfig' 'openjpeg' 'lcms2' 'poppler-data'
         'nss' 'qt5-base' 'glib2')
makedepends=('extra-cmake-modules' 'lcms2' 'icu' 'gobject-introspection')
options=('!libtool')
conflicts=('poppler-glib' 'poppler-qt5' 'poppler-qt')
provides=('poppler-glib' 'poppler-qt5' 'poppler-qt')
replaces=('poppler-glib' 'poppler-qt5' 'poppler-qt')
source=("https://poppler.freedesktop.org/${pkgname}-${pkgver}.tar.xz")
md5sums=('7de34c4e1255351cc1c8a6e721355a18')


build() {
  mkdir -p build
  cd build
  
   cmake ../${pkgname}-${pkgver} \
    -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DENABLE_XPDF_HEADERS=ON \
    -DBUILD_GTK_TESTS=OFF \
    -DBUILD_QT4_TESTS=OFF \
    -DENABLE_GLIB=ON 
  make
}

package() {
  cd build
  
  make DESTDIR=${pkgdir} install

  #rm -f ${pkgdir}/usr/lib/pkgconfig/poppler-{glib,qt4,qt5}.pc
}



