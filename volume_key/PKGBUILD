
pkgname=volume_key
pkgver=0.3.10
pkgrel=1
pkgdesc="Library for manipulating storage volume encryption keys and storing them separately from volumes"
arch=('x86_64')
url="https://pagure.io/volume_key"
license=('GPL')
depends=('cryptsetup' 'nss' 'util-linux' 'gpgme')
source=("https://releases.pagure.org/volume_key/${pkgname}-${pkgver}.tar.xz"
        "https://pagure.io/volume_key/c/ecef526a51c5a276681472fd6df239570c9ce518.patch")
sha256sums=('c5729de7e33e39c8674e9aae2337d2719f9298d6499f1656d0d25a065a7e98a7'
            'f544ec62d74a1c739978cdc79cfcb95243cf06c0f68f435c6cc1256fc7ca3ab3')

build() {
    cd ${pkgname}-${pkgver}
    # needed with cryptsetup 2.0.0
    #patch -p1 -i ${srcdir}/ecef526a51c5a276681472fd6df239570c9ce518.patch
    
    ./configure --prefix=/usr         
    make
}

package() {
    cd ${pkgname}-${pkgver}

    make DESTDIR=${pkgdir}/ install
}
 
