
pkgname=rust
pkgver=1.19.0
pkgrel=2
arch=('x86_64')
pkgdesc='Systems programming language that runs fast, prevents segfaults, and guarantees thread safety.'
url='http://www.rust-lang.org/'
license=('MIT' 'Apache')
depends=('gcc-libs')
makedepends=('cmake' 'curl' 'libffi' 'make' 'python2' 'rust')
conflicts=('cargo')
options=('!strip')
source=("http://static.rust-lang.org/dist/rustc-${pkgver}-src.tar.gz"
        'config.toml')
md5sums=('75e779670ac79edf023497a9c37eb35d'
         '8e39ef9fa461bf42f627daebd7884ee1')

build() {
  cd rustc-${pkgver}-src
  cp ${srcdir}/config.toml config.toml

  ./x.py build
}

package() {
  cd rustc-${pkgver}-src
  DESTDIR=${pkgdir} ./x.py install

  install -Dm644 LICENSE-APACHE ${pkgdir}/usr/share/licenses/$pkgname/LICENSE-APACHE
  install -Dm644 LICENSE-MIT ${pkgdir}/usr/share/licenses/$pkgname/LICENSE-MIT
}
