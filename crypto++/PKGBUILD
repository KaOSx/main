
pkgname=crypto++
pkgver=5.6.4
_pkgver=564
pkgrel=2
pkgdesc="A free C++ class library of cryptographic schemes."
arch=('x86_64')
license=('custom')
makedepends=('unzip' 'cmake')
url="http://www.cryptopp.com/"
source=("http://www.cryptopp.com/cryptopp${_pkgver}.zip"
        'libcrypto++.pc') # set to remove after testing cmake build setup
md5sums=('4ee7e5cdd4a45a14756c169eaf2a77fc'
         'ea27f28fe0303fcaa24d83cf4a964d53')

build() {
  mkdir -p build
  cd build
  
  cmake ../ \
    -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DBUILD_SHARED=ON \
    -DBUILD_STATIC=OFF \
    -DBUILD_TESTING=OFF \
    -DCMAKE_INSTALL_LIBDIR=lib
    
  make  
}

package() {
  cd build
  make DESTDIR=${pkgdir} install
  
  install -Dm644 ../License.txt ${pkgdir}/usr/share/licenses/${pkgname}/LICENSE
}
