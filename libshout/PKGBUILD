
pkgname=libshout
pkgver=2.4.2
pkgrel=1
pkgdesc="Library for accessing a shoutcast/icecast server"
arch=('x86_64')
depends=('libvorbis' 'libtheora' 'speex')
url="https://www.icecast.org/"
options=('!libtool')
license=('LGPL')
source=("https://downloads.xiph.org/releases/libshout/${pkgname}-${pkgver}.tar.gz")
md5sums=('b7a33377d716a95c9159f0922d04e596')

build() {
  cd ${pkgname}-${pkgver}
  sed -e 's|SSLeay_add_all_algorithms|OpenSSL_add_all_algorithms|g' -i src/tls.c
  
  ./configure --prefix=/usr \
    --sysconfdir=/etc \
    --localstatedir=/var
    
  make LDFLAGS+=-lspeex
}

package() {
  cd ${pkgname}-${pkgver}
  
  make DESTDIR="${pkgdir}" install
}
