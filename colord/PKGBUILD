
pkgname=colord
pkgver=1.4.2
pkgrel=1
pkgdesc="System service easily manage, install and generate color profiles to manage input and output devices"
arch=('x86_64')
url="https://www.freedesktop.org/software/colord"
license=('GPL2')
depends=('lcms2' 'polkit' 'sqlite3' 'systemd' 'libgusb' 'dbus' 'libgudev' 'sane')
makedepends=('intltool' 'gobject-introspection' 'vala' 'docbook-xsl' 'sane' 'bash-completion' 'meson')
options=('!libtool')
install=colord.install
source=("https://www.freedesktop.org/software/colord/releases/${pkgname}-${pkgver}.tar.xz")
sha256sums=('4c70d5052a9c96da51fa57e80d6dc97ca642943d5b9940a196c990dfe84beca7')

build() {
  mkdir -p build
  cd build
  
  #export LANG=en_US.UTF-8
  
  meson ../${pkgname}-${pkgver} \
    --prefix=/usr \
    --buildtype=release \
    --libexecdir=/usr/lib/colord \
    --localstatedir=/var \
    -Denable-sane=true \
    -Denable-vala=true \
    -Denable-docs=false \
    -Denable-man=false \
    -Dwith-daemon-user=colord \
    -Denable-argyllcms-sensor=false
  ninja
}

package() {
  cd build
  DESTDIR=${pkgdir} ninja install
  
  chown -R 124:124 ${pkgdir}/var/lib/colord
}

