
pkgname=googletest
pkgver=1.8.1
pkgrel=1
pkgdesc='Googles C++ test framework'
url='https://github.com/google/googletest/'
arch=('x86_64')
license=('BSD')
depends=('gcc-libs' 'sh')
makedepends=('cmake' 'python2')
options=('!makeflags')
source=("https://github.com/google/googletest/archive/release-${pkgver}.tar.gz")
md5sums=('2e6fbeb6a91310a16efe181886c59596')

build() {
  mkdir -p build
  cd build
  
  cmake ../${pkgname}-release-${pkgver} \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DBUILD_SHARED_LIBS=ON \
    -DCMAKE_SKIP_RPATH=ON
  make
}

package() {
  cd build
  make DESTDIR=${pkgdir} install
  
  install -Dm 644 ../${pkgname}-release-${pkgver}/googletest/LICENSE ${pkgdir}/usr/share/licenses/${pkgname}
}

