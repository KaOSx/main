#
# Chakra Packages for Chakra, part of chakra-project.org
#
# maintainer abveritas@chakra-project.org

pkgname=uswsusp
pkgver=1.0
pkgrel=3
pkgdesc='Allows suspending with new userspace suspend.'
arch=('i686' 'x86_64')
url='http://suspend.sourceforge.net'
license=('GPL')
depends=('lzo2' 'libx86' 'libgcrypt' 'pciutils')
options=('docs' 'zipman')
backup=(etc/suspend.conf)
install=uswsusp.install
source=("http://sourceforge.net/projects/suspend/files/suspend/suspend-${pkgver}/suspend-utils-${pkgver}.tar.bz2"
        "uresume-hook"
        "uresume-install")
md5sums=('02f7d4b679bad1bb294a0efe48ce5934'
         '3a696797708082407eaafc3804a04495'
         '11e7a3a8d6abde6b8e8c9ef0d1d4f29c')
	
build() {
  cd suspend-utils-${pkgver}
  
  ./configure \
    --enable-compress \
    --enable-encrypt \
    --enable-threads \
    --disable-resume-static \
    --disable-static \
    --prefix=/usr \
    --sysconfdir=/etc
}

package() {
  cd suspend-utils-${pkgver}

  make DESTDIR=${pkgdir} install

  # Rename the binary to fit our needs
  mv -v ${pkgdir}/usr/lib/suspend/resume ${pkgdir}/usr/lib/suspend/uresume
  
  install -D -m644 ../uresume-hook ${pkgdir}/usr/lib/initcpio/hooks/uresume
  install -D -m644 ../uresume-install ${pkgdir}/usr/lib/initcpio/install/uresume

 
}
