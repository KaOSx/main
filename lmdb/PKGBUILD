
pkgname=lmdb
pkgver=0.9.24
pkgrel=2
pkgdesc="Fast, ultra-compact key-value embedded data store developed by Symas for the OpenLDAP Project."
url="https://symas.com/lmdb/"
license=('custom:OpenLDAP')
depends=('gcc')
arch=('x86_64')
source=("https://github.com/LMDB/lmdb/archive/LMDB_${pkgver}.tar.gz"
        'lmdb.pc')
md5sums=('c3e3474daf4a59685d154cc7fc5c99ad'
         'cd669dad02d583d4774e81d0fc64b004')

build() {
  cd lmdb-LMDB_${pkgver}/libraries/liblmdb

  make prefix=/usr
}

package() {
  cd lmdb-LMDB_${pkgver}/libraries/liblmdb
  install -m755 -d ${pkgdir}/usr/{bin,lib,include,man/man1,share}
  
  make DESTDIR=${pkgdir} prefix=/usr install
  mv ${pkgdir}/usr/man ${pkgdir}/usr/share/man
  
  install -m644 -D LICENSE ${pkgdir}/usr/share/licenses/${pkgname}/LICENSE
  install -m644 -D ${srcdir}/lmdb.pc ${pkgdir}/usr/lib/pkgconfig/lmdb.pc
}
