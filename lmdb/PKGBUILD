
pkgname=lmdb
pkgver=0.9.23
pkgrel=2
pkgdesc="Fast, ultra-compact key-value embedded data store developed by Symas for the OpenLDAP Project."
url="https://symas.com/lmdb/"
license=('custom:OpenLDAP')
depends=('gcc')
arch=('x86_64')
source=("https://github.com/LMDB/lmdb/archive/LMDB_${pkgver}.tar.gz"
        'lmdb.pc')
md5sums=('5a57d029e6829e95d159bb6f689880d3'
         'cd669dad02d583d4774e81d0fc64b004')

build() {
  cd lmdb-LMDB_${pkgver}/libraries/liblmdb

  make prefix=/usr
}

package() {
  cd lmdb-LMDB_${pkgver}/libraries/liblmdb
  install -m755 -d ${pkgdir}/usr/{bin,lib,include,man/man1,share}
  
  make DESTDIR=${pkgdir} prefix=/usr install
  mv $pkgdir/usr/man $pkgdir/usr/share/man
  
  install -m644 -D LICENSE ${pkgdir}/usr/share/licenses/${pkgname}/LICENSE
  install -m644 -D ${srcdir}/lmdb.pc ${pkgdir}/usr/lib/pkgconfig/lmdb.pc
}
