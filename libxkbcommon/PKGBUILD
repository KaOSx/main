
pkgname=libxkbcommon
pkgver=0.8.4
pkgrel=1
pkgdesc="Keyboard handling library using XKB data"
arch=('x86_64')
url="https://xkbcommon.org/"
license=('custom')
depends=('xkeyboard-config' 'glibc' 'wayland-protocols')
makedepends=('doxygen' 'meson' 'ninja')
options=('!libtool')
#source=("https://xkbcommon.org/download/${pkgname}-${pkgver}.tar.xz")
source=("https://github.com/xkbcommon/libxkbcommon/archive/xkbcommon-${pkgver}.tar.gz")
sha256sums=('299b47558188017047354995f5882d43c2c8a60367df553319dcecebadb73e1d')

build() {
  mkdir -p build
  cd build
  
  export LANG=en_US.UTF-8
  
  meson ../${pkgname}-xkbcommon-${pkgver} \
    --prefix=/usr \
    --buildtype=release \
    --libexecdir=/usr/lib 
  ninja
}

package() {
  cd build
  DESTDIR=${pkgdir} ninja install
  
  install -Dm644 ../${pkgname}-xkbcommon-${pkgver}/LICENSE ${pkgdir}/usr/share/licenses/${pkgname}/LICENSE
}
