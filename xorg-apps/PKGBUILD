
pkgname=xorg-apps
pkgver=7.16
pkgrel=1
pkgdesc="Various X.Org applications"
arch=('x86_64')
url="https://xorg.freedesktop.org/"
license=('custom')
depends=('libxcursor' 'libxkbfile' 'libpng' 'libxft' 'libfontenc' 'libxaw' 'libxi')
makedepends=('pkgconfig' 'xbitmaps' 'xorg-util-macros')
source=("https://xorg.freedesktop.org/releases/individual/app/oclock-1.0.4.tar.bz2"
        "https://invisible-island.net/archives/luit/luit-20220111.tgz"
        "https://xorg.freedesktop.org/releases/individual/app/xclock-1.1.1.tar.xz"
        "https://xorg.freedesktop.org/releases/individual/app/xpr-1.1.0.tar.xz"
        "https://xorg.freedesktop.org/releases/individual/app/xwd-1.0.8.tar.bz2"
        "https://xorg.freedesktop.org/releases/individual/app/xwud-1.0.6.tar.xz"
        "https://xorg.freedesktop.org/releases/individual/app/x11perf-1.6.0.tar.bz2"
        "https://xorg.freedesktop.org/releases/individual/app/xbiff-1.0.4.tar.bz2"
        "https://xorg.freedesktop.org/releases/individual/app/xclipboard-1.1.4.tar.xz"
        "https://xorg.freedesktop.org/releases/individual/app/xconsole-1.0.8.tar.xz"
        "https://xorg.freedesktop.org/releases/individual/app/xcursorgen-1.0.7.tar.bz2"
        "https://xorg.freedesktop.org/releases/individual/app/xeyes-1.2.0.tar.bz2"
        "https://xorg.freedesktop.org/releases/individual/app/xkill-1.0.5.tar.bz2"
        "https://xorg.freedesktop.org/releases/individual/app/xload-1.1.4.tar.xz"
        "https://xorg.freedesktop.org/releases/individual/app/xlogo-1.0.5.tar.bz2"
        "https://xorg.freedesktop.org/releases/individual/app/xmag-1.0.6.tar.bz2"
        "https://xorg.freedesktop.org/releases/individual/app/xmessage-1.0.5.tar.bz2"
        "https://xorg.freedesktop.org/releases/individual/app/xcalc-1.1.1.tar.xz"
        "https://xorg.freedesktop.org/releases/individual/app/xman-1.1.5.tar.bz2"
        "https://xorg.freedesktop.org/releases/individual/app/xedit-1.2.3.tar.xz"
        'LICENSE'
        'luit.patch')
sha256sums=('cc20cfc1c0d5128d89e1eecd9ba52e58f111075be163e0aeda5690dbaafbaefe'
            '86c07a4ff2d4374a655a1eef2ec7504582d42bba5971c79b111364e2b26ed468'
            'df7ceabf8f07044a2fde4924d794554996811640a45de40cb12c2cf1f90f742c'
            'a0bbb11475366622632440b1c6f16d19964b4516483232fe5f46c169528557c5'
            'fbaa2b34163714fe7be22b60920ea4683f63b355babb1781aec2e452a033031b'
            '64048cd15eba3cd9a3d2e3280650391259ebf6b529f2101d1a20f441038c1afe'
            'e87098dec1947572d70c62697a7b70bde1ab5668237d4660080eade6bc096751'
            'e1e1a39628a5678585008ef7fb1ff2864edaaa0e062989c2331f8c74e0fec971'
            'f43d4560d1464e8ff58e850212f6bdb703989b66d599fb61f351b5f9e077f253'
            '7b4a6af068e40e2e6a4521d6f35c9253ec152c287d025fff9cc4c99f2586bba4'
            '35b6f844b24f1776e9006c880a745728800764dbe3b327a128772b4610d8eb3d'
            'f8a17e23146bef1ab345a1e303c6749e42aaa7bcf4f25428afad41770721b6db'
            'c5f0bb6a95e1ac7c4def8a657496d5d2f21ccd41eb47ef2c9ccb03fb6d6aff6b'
            '8346b99120db24e0f42920f7f12e23e9b1b407d3a66ce419990387b608373031'
            '633d7a3aa5df61e4e643b740e5799664741ab1a0ba40593e54fcd15dc30f378e'
            '87a2bc23b251e2d8f8370d3283a4d6c8dac98a30cb5749a04336cdb55c14e161'
            '373dfb81e7a6f06d3d22485a12fcde6e255d58c6dee1bbaeb00c7d0caa9b2029'
            '8cb08212c5322e8043f39b28699e13a43f000976c90b3c7fadd4fae2766326b4'
            '4e3c2c7497e9734a6d3c8e1b6a364612892bb31e9f33076c9fdae7177ab60978'
            'bdd33afeeca881622e55d2cf28f07b4a98f083d0a2573c0b9048f25bdd62db2f'
            '0b874779b97891979c7b6ffc24bc6e23a5518e5fec7229c71e7d8e2c63e38a81'
            '633f8cb6a9c273b51e0dee1f747d1681a4faba7c43d16a28efe544ec940e6eb5')

build() {
  cd ${srcdir}
  #patch -p0 -i $srcdir/luit.patch

  for i in *; do
    if [ -d "${i}" ]; then
      pushd "${i}"
      # remove disable error on luit fix upstream
      ./configure --prefix=/usr --mandir=/usr/share/man # --disable-selective-werror
      make
      popd
    fi
  done
}

package() {
  cd "${srcdir}"

  for i in *; do
    if [ -d "${i}" ]; then
      pushd "${i}"    
      make DESTDIR="${pkgdir}" install
      popd
    fi
  done

  install -D -m644 LICENSE ${pkgdir}/usr/share/licenses/${pkgname}/LICENSE
}

