
pkgname=libmypaint
pkgver=1.4.0
_pkgver=1.4.0
pkgrel=1
pkgdesc="Brushlib, is a library for making brushstrokes which is used by GIMP"
arch=('x86_64')
url="https://github.com/mypaint/libmypaint"
license=('ISC')
depends=('gegl' 'gobject-introspection' 'json-c')
makedepends=('intltool' 'python3')
source=("https://github.com/mypaint/libmypaint/releases/download/v${_pkgver}/${pkgname}-${_pkgver}.tar.xz"
        'gegl0.4.x.patch')
sha256sums=('59d13b14c6aca0497095f29ee7228ca2499a923ba8e1dd718a2f2ecb45a9cbff'
            'beb4f87a37bd8b36138710541d890e505aa3d73ddfded0c16e321f01aae7e170')

build() {
  cd ${pkgname}-${_pkgver}
  #patch -p1 -i ${srcdir}/gegl0.4.x.patch
  #sed -i -e 's|gegl-0.3 >= 0.3|gegl-0.4 >= 0.4.16|g' configure

  # re-enable gegl with 2.0.0
  ./configure --prefix=/usr --disable-gegl
  make
}

package() {
  cd ${pkgname}-${_pkgver}
  make DESTDIR=${pkgdir} install
  
  install -D -m644 COPYING ${pkgdir}/usr/share/licenses/${pkgname}/LICENSE
}
